<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Runa</title>
    <link rel="stylesheet" href="HomeStyles.css">
    <link rel="icon" href="https://raw.githubusercontent.com/RunecGD/RunaPicture/c415d8f7dded7fc0043f5e0b8db9c972dae668ac/Runa.png" type="image/png">
</head>
<body>
<header>
    <a class="TopHomeLink" href="/frontend/home.html" aria-label="На главную" accesskey="1">
        <img src="https://raw.githubusercontent.com/RunecGD/RunaPicture/c415d8f7dded7fc0043f5e0b8db9c972dae668ac/RunaLogo.png" alt="Логотип Runa" width="99.2" height="40.1"/> <!-- Уменьшен размер логотипа -->
    </a>
    <div class="search-profile-container">
        <div class="search-container">
            <input class="Search__nativeInput" type="search" data-testid="search_top_input" id="search-:r0:"
                   placeholder="Поиск" autocomplete="off" value="">
        </div>
        <div class="profile-wrapper">
            <img src="" alt="Профиль" class="profile-icon" onclick="toggleProfileInfo()"/>
            <div class="profile-info" id="profileInfo">

            </div>
        </div>
    </div>
</header>

<div class="menu">
    <button onclick="location.href='/frontend/profile.html'">
        <svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd"
                  d="M5.84 15.63a6.97 6.97 0 0 0 8.32 0 8.2 8.2 0 0 0-8.32 0zM4.7 14.57a7 7 0 1 1 10.6 0 9.7 9.7 0 0 0-10.6 0zM10 1.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17zm-1.5 7a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm1.5-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"
                  fill="currentColor" fill-rule="evenodd"></path>
        </svg>
        Профиль
    </button>
    <button onclick="location.href='/frontend/chats.html'">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
            <path d="M6.83 15.75c.2-.23.53-.31.82-.2.81.3 1.7.45 2.6.45 3.77 0 6.75-2.7 6.75-6s-2.98-6-6.75-6S3.5 6.7 3.5 10c0 1.21.4 2.37 1.14 3.35.1.14.16.31.15.49-.04.76-.4 1.78-1.08 3.13 1.48-.11 2.5-.53 3.12-1.22ZM3.24 18.5a1.2 1.2 0 0 1-1.1-1.77A10.77 10.77 0 0 0 3.26 14 7 7 0 0 1 2 10c0-4.17 3.68-7.5 8.25-7.5S18.5 5.83 18.5 10s-3.68 7.5-8.25 7.5c-.92 0-1.81-.13-2.66-.4-1 .89-2.46 1.34-4.35 1.4Z"
                  fill="currentColor" fill-rule="nonzero"></path>
        </svg>
        Чаты
    </button>
    <button onclick="location.href='/friends'">
        <svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg">
            <g fill="currentColor">
                <g clip-rule="evenodd" fill-rule="evenodd">
                    <path d="M6.25 3.5a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm-1.5 3a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm-2.06 5.07c.96-.55 2.22-.82 3.56-.82s2.6.27 3.56.82c.98.56 1.69 1.47 1.69 2.68 0 .7-.28 1.3-.78 1.71-.48.39-1.1.54-1.72.54H3.5c-.61 0-1.24-.15-1.72-.54-.5-.4-.78-1-.78-1.71 0-1.21.71-2.12 1.69-2.68zm.75 1.3c-.65.37-.94.84-.94 1.38 0 .3.1.44.22.54.14.11.4.21.78.21H9c.39 0 .64-.1.78-.21.12-.1.22-.25.22-.54 0-.54-.29-1-.94-1.38-.66-.39-1.65-.62-2.81-.62s-2.15.23-2.81.62zM13.75 3.5a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm-1.5 3a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0z"></path>
                </g>
                <path d="M13.75 12.25c-.23 0-.45.01-.68.03a.75.75 0 1 1-.14-1.49c.27-.03.54-.04.82-.04 1.34 0 2.6.27 3.56.82.98.56 1.69 1.47 1.69 2.68 0 .7-.28 1.3-.78 1.71-.48.39-1.1.54-1.72.54h-3a.75.75 0 0 1 0-1.5h3c.39 0 .64-.1.78-.21.12-.1.22-.25.22-.54 0-.54-.29-1-.94-1.38a5.77 5.77 0 0 0-2.81-.62z"></path>
            </g>
        </svg>
        Друзья
    </button>
    <button onclick="location.href='/frontend/students.html'" style="display: flex; align-items: center;">
        <svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd"
                  d="M10 7.75a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zM7.25 6.5a2.75 2.75 0 1 1 5.5 0 2.75 2.75 0 0 1-5.5 0zm-.5 7.25c0-.42.23-.83.8-1.17A4.81 4.81 0 0 1 10 12c1.03 0 1.88.23 2.45.58.57.34.8.75.8 1.17 0 .3-.1.44-.22.54-.14.11-.4.21-.78.21h-4.5c-.39 0-.64-.1-.78-.21-.12-.1-.22-.25-.22-.54zM10 10.5c-1.22 0-2.37.27-3.23.8-.88.53-1.52 1.37-1.52 2.45 0 .7.28 1.3.78 1.71.48.39 1.1.54 1.72.54h4.5c.61 0 1.24-.15 1.72-.54.5-.4.78-1 .78-1.71 0-1.08-.64-1.92-1.52-2.45-.86-.53-2-.8-3.23-.8zm4-5.59c.06-.4.44-.7.85-.64a2.5 2.5 0 0 1-.35 4.98.75.75 0 0 1 0-1.5 1 1 0 0 0 .14-1.99.75.75 0 0 1-.63-.85zM15.76 10a.75.75 0 0 0 0 1.5c1.16 0 1.75.67 1.75 1.25 0 .22-.07.41-.19.55-.1.12-.24.2-.46.2a.75.75 0 0 0 0 1.5c1.43 0 2.15-1.21 2.15-2.25 0-1.71-1.6-2.75-3.25-2.75zM5 10.75a.75.75 0 0 0-.75-.75C2.61 10 1 11.04 1 12.75 1 13.79 1.72 15 3.15 15a.75.75 0 0 0 0-1.5.57.57 0 0 1-.47-.2.86.86 0 0 1-.18-.55c0-.58.6-1.25 1.75-1.25.41 0 .75-.34.75-.75zm.14-6.47a.75.75 0 0 1 .22 1.48 1 1 0 0 0 .14 1.99.75.75 0 1 1 0 1.5 2.5 2.5 0 0 1-.36-4.97z"
                  fill="currentColor" fill-rule="evenodd"></path>
        </svg>
        Студенты
    </button>
</div>
<div class="profile-container">
    <h1 id="fullName"></h1>
        <p><strong>Факультет:</strong> <span id="faculty"></span></p>
        <p><strong>Специальность:</strong> <span id="specialty"></span></p>
        <p><strong>Курс:</strong> <span id="course"></span></p>
        <p><strong>Группа:</strong> <span id="group"></span></p>
    <button id="chatButton">Перейти в чат</button>
</div>
<script src="auth.js"></script>
<script src="ProfileInfo.js"></script>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const userId = urlParams.get('userId');

    async function fetchUserInfo() {
        const response = await fetch(`${BASE_URL}/users/${userId}`);
        if (!response.ok) {
            alert("Ошибка при получении информации о пользователе");
            return;
        }

        const userData = await response.json();
        console.log(userData); // Отладка: выводим данные в консоль

        document.getElementById('fullName').textContent = `${userData.surname} ${userData.name} ${userData.patronymic}`;
        document.getElementById('faculty').textContent = userData.faculty;
        document.getElementById('specialty').textContent = userData.specialty;
        document.getElementById('course').textContent = userData.course;
        document.getElementById('group').textContent = userData.group_name; // Используем group_name
    }

    document.getElementById('chatButton').onclick = () => {
        location.href = `/frontend/userChat.html?userId=${userId}`;
    };

    fetchUserInfo();
</script>

<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f5f0e1;
        margin: 0;
        padding: 20px;
    }
    .profile-container {
        width: 600px;
        margin-top: 40px;
        border: 1px solid #7d5b3a;
        border-radius: 10px;
        padding: 20px;
        background-color: #fff;
    }
    .profile-info p {
        margin: 5px 0;
    }
    #chatButton {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        background-color: #7d5b3a;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    #chatButton:hover {
        background-color: #5a3c2a;
    }
</style>

</body>
</html>